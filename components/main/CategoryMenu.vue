<script setup lang="ts">
import { ref, watchEffect, watch } from "vue";
import { useMenuStore } from "@/stores/menuStore";
import { useRoute } from "vue-router";
import CatalogMenuListItem from "../../components/main/CatalogMenuListItem.vue";
import type { Category } from "~/types";



const store = useMenuStore();
const route = useRoute();

// üìå Fake –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const fakeCategories = ref<Category[]>([
  { id: 1, name: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞", slug: "electronika", image: "/images/electronics.png", description: "–í—Å–µ –≤–∏–¥—ã —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏: –æ—Ç —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤ –¥–æ –±—ã—Ç–æ–≤–æ–π —Ç–µ—Ö–Ω–∏–∫–∏." },
  { id: 2, name: "–û–¥–µ–∂–¥–∞", slug: "odezhda", image: "/images/clothes.png", description: "–ú–æ–¥–Ω–∞—è –∏ —É–¥–æ–±–Ω–∞—è –æ–¥–µ–∂–¥–∞ –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑—Ä–∞—Å—Ç–æ–≤ –∏ —Å—Ç–∏–ª–µ–π." },
  { id: 3, name: "–ö–Ω–∏–≥–∏", slug: "knigi", image: "/images/books.png", description: "–®–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä –∫–Ω–∏–≥: –æ—Ç –∫–ª–∞—Å—Å–∏–∫–∏ –¥–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–µ—Å—Ç—Å–µ–ª–ª–µ—Ä–æ–≤." },
  { id: 4, name: "–¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞", slug: "tovary-dlya-doma", image: "/images/home-goods.png", description: "–í—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–∞: –æ—Ç –º–µ–±–µ–ª–∏ –¥–æ –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤." },
  { id: 5, name: "–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã", slug: "sportivnye-tovary", image: "/images/sports.png", description: "–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å–ø–æ—Ä—Ç–∞, —Ç—Ä–µ–Ω–∞–∂–µ—Ä—ã –∏ —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –æ–¥–µ–∂–¥–∞." },
  { id: 6, name: "–ê–≤—Ç–æ—Ç–æ–≤–∞—Ä—ã", slug: "avtotovary", image: "/images/car-accessories.png", description: "–í—Å–µ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è: –æ—Ç –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤ –¥–æ –∑–∞–ø—á–∞—Å—Ç–µ–π." },
  { id: 7, name: "–ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è", slug: "produkty-pitaniya", image: "/images/food.png", description: "–í—Å—è –ø—Ä–æ–¥—É–∫—Ü–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ —Å—Ç–æ–ª–∞: —Å–≤–µ–∂–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏—è, —Å–ª–∞–¥–æ—Å—Ç–∏." },
  { id: 8, name: "–ò–≥—Ä—É—à–∫–∏", slug: "igrushki", image: "/images/toys.png", description: "–î–ª—è –¥–µ—Ç–µ–π —Ä–∞–∑–Ω—ã—Ö –≤–æ–∑—Ä–∞—Å—Ç–æ–≤: –∏–≥—Ä—É—à–∫–∏, —Ä–∞–∑–≤–∏–≤–∞—é—â–∏–µ –∏–≥—Ä—ã –∏ –Ω–∞–±–æ—Ä—ã." },
  { id: 9, name: "–ö–æ—Å–º–µ—Ç–∏–∫–∞ –∏ –ø–∞—Ä—Ñ—é–º–µ—Ä–∏—è", slug: "kosmetika-i-parfyumeriya", image: "/images/cosmetics.png", description: "–ö—Ä–∞—Å–æ—Ç–∞ –∏ —É—Ö–æ–¥ –∑–∞ —Å–æ–±–æ–π: –∫–æ—Å–º–µ—Ç–∏–∫–∞, –ø–∞—Ä—Ñ—é–º–µ—Ä–∏—è –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã." },
  { id: 10, name: "–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –∫—É—Ö–Ω–∏", slug: "tekhnika-dlya-kukhni", image: "/images/kitchen-appliances.png", description: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –≤–∞—à–µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞ –∫—É—Ö–Ω–µ." },
]);



// üìå Fake –¥–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const fakeCategoryChildren = ref({
  electronika: [
    { id: 11, name: "–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã", slug: "smartfony", description: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ã —Å –Ω–æ–≤–µ–π—à–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏." },
    { id: 12, name: "–ù–æ—É—Ç–±—É–∫–∏", slug: "noutbuki", description: "–ú–æ—â–Ω—ã–µ –Ω–æ—É—Ç–±—É–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏ –∏–≥—Ä." },
    { id: 13, name: "–¢–µ–ª–µ–≤–∏–∑–æ—Ä—ã", slug: "televizory", description: "–¢–µ–ª–µ–≤–∏–∑–æ—Ä—ã —Å –≤—ã—Å–æ–∫–æ–π —á–µ—Ç–∫–æ—Å—Ç—å—é –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏." },
    { id: 14, name: "–§–æ—Ç–æ–∞–ø–ø–∞—Ä–∞—Ç—ã", slug: "fotoapparaty", description: "–ö–∞–º–µ—Ä—ã –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤ –∏ –ª—é–±–∏—Ç–µ–ª–µ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏." },
    { id: 15, name: "–ù–∞—É—à–Ω–∏–∫–∏", slug: "naushniki", description: "–ù–∞—É—à–Ω–∏–∫–∏ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–≤—É–∫–∞ –∏ –∫–æ–º—Ñ–æ—Ä—Ç–∞." },
    { id: 16, name: "–ò–≥—Ä–æ–≤—ã–µ –ø—Ä–∏—Å—Ç–∞–≤–∫–∏", slug: "igrovye-pristavki", description: "–õ—É—á—à–∏–µ –∏–≥—Ä–æ–≤—ã–µ –ø—Ä–∏—Å—Ç–∞–≤–∫–∏ –¥–ª—è –≥–µ–π–º–µ—Ä–æ–≤." },
    { id: 17, name: "–ü–ª–∞–Ω—à–µ—Ç—ã", slug: "planshety", description: "–ü–ª–∞–Ω—à–µ—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π." },
    { id: 18, name: "–ö–∞–º–µ—Ä—ã –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è", slug: "kamery-videonablyudeniya", description: "–°–∏—Å—Ç–µ–º—ã –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –¥–æ–º–∞." },
    { id: 19, name: "–ü—Ä–∏–Ω—Ç–µ—Ä—ã", slug: "printery", description: "–ü—Ä–∏–Ω—Ç–µ—Ä—ã –¥–ª—è –¥–æ–º–∞ –∏ –æ—Ñ–∏—Å–∞." },
    { id: 20, name: "–ñ–µ—Å—Ç–∫–∏–µ –¥–∏—Å–∫–∏", slug: "zhestkie-diski", description: "–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –Ω–∞–¥–µ–∂–Ω—ã—Ö –∂–µ—Å—Ç–∫–∏—Ö –¥–∏—Å–∫–∞—Ö." },
    { id: 21, name: "–†–æ—É—Ç–µ—Ä—ã", slug: "routery", description: "–†–æ—É—Ç–µ—Ä—ã –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤ –≤–∞—à–µ–º –¥–æ–º–µ." },
    { id: 22, name: "–ú–æ–Ω–∏—Ç–æ—Ä—ã", slug: "monitory", description: "–ú–æ–Ω–∏—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏ –∏–≥—Ä, —Å –≤—ã—Å–æ–∫–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º." },
  ],
  odezhda: [
    { id: 25, name: "–ú—É–∂—Å–∫–∞—è –æ–¥–µ–∂–¥–∞", slug: "muzhskaya-odezhda", description: "–°—Ç–∏–ª—å–Ω–∞—è –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è –æ–¥–µ–∂–¥–∞ –¥–ª—è –º—É–∂—á–∏–Ω." },
    { id: 26, name: "–ñ–µ–Ω—Å–∫–∞—è –æ–¥–µ–∂–¥–∞", slug: "zhenskaya-odezhda", description: "–ú–æ–¥–Ω–∞—è –∏ —É–¥–æ–±–Ω–∞—è –æ–¥–µ–∂–¥–∞ –¥–ª—è –∂–µ–Ω—â–∏–Ω." },
    { id: 27, name: "–î–µ—Ç—Å–∫–∞—è –æ–¥–µ–∂–¥–∞", slug: "detskaya-odezhda", description: "–û–¥–µ–∂–¥–∞ –¥–ª—è –¥–µ—Ç–µ–π: –∫–æ–º—Ñ–æ—Ä—Ç –∏ —Å—Ç–∏–ª—å." },
    { id: 28, name: "–û–±—É–≤—å", slug: "obuv", description: "–®–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä –æ–±—É–≤–∏ –Ω–∞ –ª—é–±–æ–π —Å–ª—É—á–∞–π." },
    { id: 29, name: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã", slug: "aksessuary", description: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ø–æ–ª–Ω—è—Ç –≤–∞—à —Å—Ç–∏–ª—å." },
  ],
  knigi: [
    { id: 30, name: "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞", slug: "fantastika", description: "–ö–Ω–∏–≥–∏ –æ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∏—Ä–∞—Ö –∏ –Ω–µ–∏–∑–≤–µ–¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—è—Ö." },
    { id: 31, name: "–î–µ—Ç–µ–∫—Ç–∏–≤—ã", slug: "detektivy", description: "–ó–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–µ –¥–µ—Ç–µ–∫—Ç–∏–≤—ã —Å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–≤—è–∑–∫–∞–º–∏." },
    { id: 32, name: "–†–æ–º–∞–Ω—Ç–∏–∫–∞", slug: "romantika", description: "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å—Ç–æ—Ä–∏–π." },
    { id: 33, name: "–ë–∏–∑–Ω–µ—Å –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞", slug: "biznes-i-ekonomika", description: "–ö–Ω–∏–≥–∏ –æ –±–∏–∑–Ω–µ—Å–µ, —ç–∫–æ–Ω–æ–º–∏–∫–µ –∏ —É—Å–ø–µ—Ö–µ." },
    { id: 34, name: "–ù–∞—É—á–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞", slug: "nauchnaya-literatura", description: "–¢—Ä—É–¥–Ω—ã–µ, –Ω–æ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∫–Ω–∏–≥–∏ –ø–æ –Ω–∞—É–∫–µ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º." },
    { id: 35, name: "–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏", slug: "inostrannye-yazyki", description: "–£—á–µ–±–Ω–∏–∫–∏ –∏ –ø–æ—Å–æ–±–∏—è –ø–æ –∏–∑—É—á–µ–Ω–∏—é –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤." },
  ],
  tovary_dlya_doma: [
    { id: 36, name: "–ú–µ–±–µ–ª—å", slug: "mebel", description: "–ú–µ–±–µ–ª—å –¥–ª—è –¥–æ–º–∞ –∏ –æ—Ñ–∏—Å–∞, —Å—Ç–∏–ª—å–Ω–∞—è –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è." },
    { id: 37, name: "–¢–µ–∫—Å—Ç–∏–ª—å –¥–ª—è –¥–æ–º–∞", slug: "tekstil-dlya-doma", description: "–¢–µ–∫—Å—Ç–∏–ª—å–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è –¥–ª—è –¥–æ–º–∞: –æ—Ç —à—Ç–æ—Ä –¥–æ –ø–æ—Å—Ç–µ–ª—å–Ω–æ–≥–æ –±–µ–ª—å—è." },
    { id: 38, name: "–ü–æ—Å—É–¥–∞", slug: "posuda", description: "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–æ—Å—É–¥–∞ –¥–ª—è –∫—É—Ö–Ω–∏ –∏ –æ–±–µ–¥–µ–Ω–Ω—ã—Ö —Å—Ç–æ–ª–æ–≤." },
    { id: 39, name: "–û—Å–≤–µ–∂–∏—Ç–µ–ª–∏ –≤–æ–∑–¥—É—Ö–∞", slug: "osvezhiteli-vozdukha", description: "–û—Å–≤–µ–∂–∏—Ç–µ–ª–∏ –¥–ª—è –¥–æ–º–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∞—Ä–æ–º–∞—Ç–∞–º–∏." },
    { id: 40, name: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã –¥–ª—è –≤–∞–Ω–Ω–æ–π", slug: "aksessuary-dlya-vannoy", description: "–í—Å–µ –¥–ª—è –≤–∞—à–µ–π –≤–∞–Ω–Ω–æ–π: –∫–æ–≤—Ä–∏–∫–∏, –ø–æ–ª–æ—Ç–µ–Ω—Ü–∞ –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã." },
  ],
  sportivnye_tovary: [
    { id: 41, name: "–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ñ–∏—Ç–Ω–µ—Å–∞", slug: "oborudovanie-dlya-fitnesa", description: "–¢—Ä–µ–Ω–∞–∂–µ—Ä—ã –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ñ–∏—Ç–Ω–µ—Å–∞." },
    { id: 42, name: "–û–¥–µ–∂–¥–∞ –¥–ª—è —Å–ø–æ—Ä—Ç–∞", slug: "odezhda-dlya-sporta", description: "–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –æ–¥–µ–∂–¥–∞ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫." },
    { id: 43, name: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã –¥–ª—è —Å–ø–æ—Ä—Ç–∞", slug: "aksessuary-dlya-sporta", description: "–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö –∑–∞–Ω—è—Ç–∏–π." },
  ],
  avtotovary: [
    { id: 44, name: "–ó–∞–ø—á–∞—Å—Ç–∏", slug: "zapchasti", description: "–ó–∞–ø—á–∞—Å—Ç–∏ –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π —Ä–∞–∑–Ω—ã—Ö –º–∞—Ä–æ–∫." },
    { id: 45, name: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π", slug: "aksessuary-dlya-avtomobiley", description: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è." },
    { id: 46, name: "–ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –≥–∞–¥–∂–µ—Ç—ã", slug: "avtomobilnye-gadzhety", description: "–ì–∞–¥–∂–µ—Ç—ã –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è." },
  ],
  produkty_pitaniya: [
    { id: 47, name: "–°–≤–µ–∂–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã", slug: "svezhie-produkty", description: "–°–≤–µ–∂–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ —Å—Ç–æ–ª–∞." },
    { id: 48, name: "–ö–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏—è", slug: "konservatsiya", description: "–ö–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—Å–µ–≥–¥–∞ –ø–æ–¥ —Ä—É–∫–æ–π." },
    { id: 49, name: "–°–ª–∞–¥–æ—Å—Ç–∏", slug: "sladosti", description: "–í–∫—É—Å–Ω—ã–µ —Å–ª–∞–¥–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ–π —Å–µ–º—å–∏." },
  ],
  igrushki: [
    { id: 50, name: "–ò–≥—Ä—É—à–∫–∏ –¥–ª—è –º–∞–ª—å—á–∏–∫–æ–≤", slug: "igrushki-dlya-malchikov", description: "–ò–≥—Ä—É—à–∫–∏ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –º—É–∂—á–∏–Ω." },
    { id: 51, name: "–ò–≥—Ä—É—à–∫–∏ –¥–ª—è –¥–µ–≤–æ—á–µ–∫", slug: "igrushki-dlya-devochek", description: "–ò–≥—Ä—É—à–∫–∏ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø—Ä–∏–Ω—Ü–µ—Å—Å." },
    { id: 52, name: "–†–∞–∑–≤–∏–≤–∞—é—â–∏–µ –∏–≥—Ä—É—à–∫–∏", slug: "razvivayushchie-igrushki", description: "–ò–≥—Ä—É—à–∫–∏, —Ä–∞–∑–≤–∏–≤–∞—é—â–∏–µ —É–º—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏." },
  ],
  kosmetika_i_parfyumeriya: [
    { id: 53, name: "–ö–æ—Å–º–µ—Ç–∏–∫–∞ –¥–ª—è –ª–∏—Ü–∞", slug: "kosmetika-dlya-lica", description: "–ö–æ—Å–º–µ—Ç–∏–∫–∞ –¥–ª—è —É—Ö–æ–¥–∞ –∑–∞ –∫–æ–∂–µ–π –ª–∏—Ü–∞." },
    { id: 54, name: "–ü–∞—Ä—Ñ—é–º–µ—Ä–∏—è", slug: "parfyumeriya", description: "–ê—Ä–æ–º–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç –≤–∞—à—É –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ—Å—Ç—å." },
    { id: 55, name: "–ö–æ—Å–º–µ—Ç–∏–∫–∞ –¥–ª—è —Ç–µ–ª–∞", slug: "kosmetika-dlya-tela", description: "–£—Ö–æ–¥ –∑–∞ —Ç–µ–ª–æ–º —Å –ø–æ–º–æ—â—å—é –ª—É—á—à–∏—Ö –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ä–µ–¥—Å—Ç–≤." },
  ],
  tekhnika_dlya_kukhni: [
    { id: 56, name: "–ë–ª–µ–Ω–¥–µ—Ä—ã", slug: "blender", description: "–ë–ª–µ–Ω–¥–µ—Ä—ã –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ø–∏—â–∏." },
    { id: 57, name: "–ú–∏–∫—Å–µ—Ä—ã", slug: "miksery", description: "–ú–∏–∫—Å–µ—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∏ —É–¥–æ–±–Ω–æ–π –≥–æ—Ç–æ–≤–∫–∏." },
    { id: 58, name: "–ö–æ—Ñ–µ–≤–∞—Ä–∫–∏", slug: "kofevarki", description: "–ö–æ—Ñ–µ–≤–∞—Ä–∫–∏ –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –≤–∫—É—Å–Ω–æ–≥–æ –∫–æ—Ñ–µ." },
  ],
});

// üìå Fake kategoriyalarni saqlash
store.setCategories(fakeCategories.value);

// üìå Default faol kategoriya
watchEffect(() => {
  if (!store.activeCategory && fakeCategories.value.length) {
    store.setActiveCategory(fakeCategories.value[0]);
  }
});

// üìå URL bo‚Äòyicha faol kategoriya o‚Äòzgarishi
watch(
  () => route.params.slug,
  (newSlug) => {
    const matchedCategory = fakeCategories.value.find((c) => c.slug === newSlug);
    if (matchedCategory) {
      store.setActiveCategory(matchedCategory);
    }
  },
  { immediate: true }
);

// üìå Faol kategoriya o‚Äòzgarganda bolalar kategoriyalarni yangilash
watchEffect(() => {
  if (store.activeCategory?.slug) {
    const replaceSlug = store.activeCategory.slug.replaceAll('-','_')
    store.setCategoryChildren(fakeCategoryChildren.value[replaceSlug] || []);
  }
});
</script>

<template>  
<div class="absolute top-[75px] left-0 w-full z-[1050] transition-transform duration-500">
    <Container>
      <nav class="grid grid-cols-[264px_1fr] relative z-1000 bg-white shadow-xl rounded-b-sm">
        <aside>
          <ul class="border-r border-solid text-text-blue-1 ] border-gray-300 w-[264px]  p-5">
            <CatalogMenuListItem
              v-for="category in store.categories"
              :key="category.id"
              :category="category"
            />
          </ul>
        </aside>
        <div class="mb-8 ml-8 ">
          <NuxtLink
            :to="`/category/${store.activeCategory?.slug}`"
            class="capitalize mt-[9px] font-semibold text-lg flex items-center text-text-blue-1 hover:text-header-primary transition-colors"
          >
            {{ store.activeCategory?.name || store.categories[0]?.name }}
          </NuxtLink>
          <div v-if="store.categoryChildren.length > 0" class="flex flex-wrap content-start h-full">
            <div
              v-for="childrenCategory in store.categoryChildren"
              :key="childrenCategory.id"
              class="flex flex-col w-1/2 xl:w-1/3 mt-2"
            >
              <NuxtLink
                :to="`/category/${childrenCategory.slug}`"
                class="mb-2 leading-4 text-sm capitalize hover:text-text-blue-1"
              >
                {{ childrenCategory.name }}
              </NuxtLink>
              <div>
                <div
                  v-for="child in childrenCategory.children"
                  :key="child.id"
                  class="mb-[9px] last:mb-0 overflow-hidden text-ellipsis text-nowrap"
                >
                  <NuxtLink
                    :to="`/category/${child.slug}`"
                    class="text-xs leading-[1.2em] transition-colors text-text-gray hover:text-header-primary capitalize"
                  >
                    {{ child.name }}
                  </NuxtLink>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </Container>
    <div class="shadow"></div>
  </div>
</template>
